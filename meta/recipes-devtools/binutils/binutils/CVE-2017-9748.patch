From 63634bb4a107877dd08b6282e28e11cfd1a1649e Mon Sep 17 00:00:00 2001
From: Nick Clifton <nickc@redhat.com>
Date: Thu, 15 Jun 2017 12:44:23 +0100
Subject: [PATCH] Avoid a possible compiler bug by using a static buffer
 instead of a stack local buffer.

	PR binutils/21582
	* ieee.c (ieee_object_p): Use a static buffer to avoid compiler
	bugs.
---
 bfd/ChangeLog |    6 ++++++
 bfd/ieee.c    |    2 +-
 2 files changed, 7 insertions(+), 1 deletion(-)

diff --git a/bfd/ChangeLog b/bfd/ChangeLog
index f39dd09..7cbd761 100644
--- a/bfd/ChangeLog
+++ b/bfd/ChangeLog
@@ -24,6 +24,12 @@
 	* tekhex.c (getvalue): Check for the source pointer exceeding the
 	end pointer before the first byte is read.
 
+2017-06-15  Nick Clifton  <nickc@redhat.com>
+
+	PR binutils/21582
+	* ieee.c (ieee_object_p): Use a static buffer to avoid compiler
+	bugs.
+
 2017-04-29  Alan Modra  <amodra@gmail.com>
 
 	PR 21432
diff --git a/bfd/ieee.c b/bfd/ieee.c
index 763c2b8..0884d87 100644
--- a/bfd/ieee.c
+++ b/bfd/ieee.c
@@ -1873,7 +1873,7 @@ ieee_object_p (bfd *abfd)
   char *processor;
   unsigned int part;
   ieee_data_type *ieee;
-  unsigned char buffer[300];
+  static unsigned char buffer[300];
   ieee_data_type *save = IEEE_DATA (abfd);
   bfd_size_type amt;
 
-- 
1.7.9.5

