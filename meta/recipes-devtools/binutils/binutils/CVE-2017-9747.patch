From 62b76e4b6e0b4cb5b3e0053d1de4097b32577049 Mon Sep 17 00:00:00 2001
From: Nick Clifton <nickc@redhat.com>
Date: Thu, 15 Jun 2017 13:08:47 +0100
Subject: [PATCH] Fix address violation parsing a corrupt ieee binary.

	PR binutils/21581
	(ieee_archive_p): Use a static buffer to avoid compiler bugs.
---
 bfd/ChangeLog |    2 ++
 bfd/ieee.c    |    2 +-
 2 files changed, 3 insertions(+), 1 deletion(-)

diff --git a/bfd/ChangeLog b/bfd/ChangeLog
index 7cbd761..5507385 100644
--- a/bfd/ChangeLog
+++ b/bfd/ChangeLog
@@ -29,6 +29,8 @@
 	PR binutils/21582
 	* ieee.c (ieee_object_p): Use a static buffer to avoid compiler
 	bugs.
+	PR binutils/21581
+	(ieee_archive_p): Likewise.
 
 2017-06-14  Nick Clifton  <nickc@redhat.com>
 
diff --git a/bfd/ieee.c b/bfd/ieee.c
index 0884d87..f7ea4bd 100644
--- a/bfd/ieee.c
+++ b/bfd/ieee.c
@@ -1355,7 +1355,7 @@ ieee_archive_p (bfd *abfd)
 {
   char *library;
   unsigned int i;
-  unsigned char buffer[512];
+  static unsigned char buffer[512];
   file_ptr buffer_offset = 0;
   ieee_ar_data_type *save = abfd->tdata.ieee_ar_data;
   ieee_ar_data_type *ieee;
-- 
1.7.9.5

